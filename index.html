<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ü–æ–¥–∑–µ–º–µ–ª—å–µ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50, #1a1a2e);
            color: #ecf0f1;
            margin: 0;
            padding: 12px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: start;
        }
        
        .container {
            background: rgba(44, 62, 80, 0.9);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        
        h1 {
            color: #3498db;
            margin-bottom: 20px;
            font-size: 22px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .coordinates {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .coord-input {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .coord-input label {
            margin-bottom: 6px;
            color: #3498db;
            font-weight: bold;
            font-size: 14px;
        }
        
        .coord-input input {
            width: 70px;
            padding: 8px;
            border: 2px solid #3498db;
            border-radius: 8px;
            background: rgba(52, 73, 94, 0.8);
            color: white;
            font-size: 16px;
            text-align: center;
        }
        
        .coord-input input:focus {
            outline: none;
            border-color: #f1c40f;
            box-shadow: 0 0 8px rgba(241, 196, 15, 0.3);
        }
        
        .result {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .location-name {
            font-size: 20px;
            font-weight: bold;
            color: #f1c40f;
            margin-bottom: 8px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .location-description {
            font-size: 14px;
            color: #bdc3c7;
            line-height: 1.4;
        }

        .type-badge {
            margin: 10px auto;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: bold;
            display: inline-block;
        }

        /* –¶–≤–µ—Ç–∞ —Ç–∏–ø–æ–≤ */
        .boss { background: #ff3333; }
        .icy { background: #7fdbff; color: #000; }
        .cave { background: #8b4513; }
        .dungeon { background: #555; }
        .rogue { background: #8a2be2; color: white; }
        .cellular { background: #32cd32; color: #000; }
        .arena { background: #ff8c00; }

        .map {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 1px;
            width: 100%;
            max-width: 450px;
            aspect-ratio: 1 / 1;
            margin: 15px auto;
            background: #0f0f1a;
            padding: 4px;
            border-radius: 8px;
        }

        .cell {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            border-radius: 3px;
        }

        .generate-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.6);
            background: linear-gradient(45deg, #3ca0db, #2c8bc9);
        }
        
        .info {
            margin-top: 15px;
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .seed-info {
            margin-top: 8px;
            font-size: 11px;
            color: #95a5a6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÆ –ü–æ–¥–∑–µ–º–µ–ª—å–µ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º</h1>
        
        <div class="coordinates">
            <div class="coord-input">
                <label for="coordX">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X</label>
                <input type="number" id="coordX" value="1" min="-1000" max="1000">
            </div>
            <div class="coord-input">
                <label for="coordY">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y</label>
                <input type="number" id="coordY" value="1" min="-1000" max="1000">
            </div>
        </div>
        
        <div class="result">
            <div class="location-name" id="locationName">–ù–∞–∂–º–∏—Ç–µ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"</div>
            <div class="location-description" id="locationDescription"></div>
            <div class="type-badge" id="typeBadge">‚Äî</div>
        </div>

        <div class="map" id="map"></div>
        
        <button class="generate-btn" onclick="generateLocation()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
        <div class="info">–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∫–∞—Ä—Ç–∞</div>
        <div class="seed-info" id="seedInfo"></div>
    </div>

    <script>
        // === –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π ===
        const NAME_COMPONENTS = {
            themes: {
                dark: { prefixes: ['–ù–µ–∫','–ú–æ—Ä','–¢–∞—Ä','–ó–∞—Ä'], roots: ['–∞–ª–∏','—É—Å','–µ–∫'], suffixes: ['—Ç—É—Å','–≥–∞–Ω','–Ω–æ–∫'] },
                light: { prefixes: ['–õ—É–º','–°–∏–ª','–§–µ–Ω'], roots: ['–∏–º–∞','–∞–Ω','–æ—Ä'], suffixes: ['—Ç–∞–ª','–º–∏—Ä','–ª–∞–Ω'] },
                underground: { prefixes: ['–ì–∞–Ω','–ì—Ä–æ','–¢—Ä—É'], roots: ['–æ–≥','–∞—Ä','–æ–Ω'], suffixes: ['–∑–∞—Ä','—Ä–æ–Ω','–º–∞–∫'] },
                ancient: { prefixes: ['–ê–∫–∞','–≠–ª–æ','–ò–ª–æ'], roots: ['—Ç—É–Ω','–º–∞—Ä','–¥–∞–ª'], suffixes: ['–¥–æ—Ä','–º–∏—Ä','–∑—É–ª'] }
            },
            locationTypes: {
                dungeon: ['–ü–æ–¥–∑–µ–º–µ–ª—å—è', '–¢–µ–º–Ω—ã–µ –∫–∞—Ç–∞–∫–æ–º–±—ã'],
                cave: ['–ü–µ—â–µ—Ä—ã', '–ì–ª—É–±–∏–Ω–Ω—ã–µ –ø–µ—â–µ—Ä—ã'],
                icy: ['–õ–µ–¥—è–Ω—ã–µ –ª–∞–±–∏—Ä–∏–Ω—Ç—ã', '–•—Ä—É—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã'],
                rogue: ['–ó–∞–±—Ä–æ—à–µ–Ω–Ω—ã–µ —Ä—É–∏–Ω—ã', '–î—Ä–µ–≤–Ω–∏–µ —Ä—É–∏–Ω—ã'],
                cellular: ['–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—â–µ—Ä—ã', '–ñ–∏–≤—ã–µ –ø–æ–ª–æ—Å—Ç–∏'],
                arena: ['–ê—Ä–µ–Ω—ã', '–ë–æ–µ–≤—ã–µ –∫—Ä—É–≥–∏'],
                boss: ['–õ–æ–≥–æ–≤–æ', '–¢—Ä–æ–Ω–Ω—ã–π –∑–∞–ª']
            },
            extras: ['–º–∞','–ª–∏','—Ç–∞','—Å—É','–Ω–æ','—Ä–µ']
        };

        // === –¢–∏–ø—ã –ø–æ–¥–∑–µ–º–µ–ª–∏–π —Å —ç–º–æ–¥–∑–∏ ===
        const DUNGEON_TYPES = [
            { name: 'dungeon', weight: 14, emoji: 'üü´', floor: '.' }, 
            { name: 'cave', weight: 14, emoji: '‚èπÔ∏è', floor: '.' },
            { name: 'icy', weight: 14, emoji: '‚ùÑÔ∏è', floor: '.' },
            { name: 'rogue', weight: 14, emoji: 'ü¶¥', floor: '.' },
            { name: 'cellular', weight: 14, emoji: 'üßø', floor: '.' },
            { name: 'arena', weight: 14, emoji: 'üå´Ô∏è', floor: '.' },
            { name: 'boss', weight: 2, emoji: 'üü™', floor: '.' }
        ];
        const TOTAL_WEIGHT = DUNGEON_TYPES.reduce((sum, t) => sum + t.weight, 0);

        // === –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä ===
        class SeededRandom {
            constructor(seed) {
                this.seed = Math.abs(seed) || 1;
            }
            next() {
                this.seed = (this.seed * 16807) % 2147483647;
                return (this.seed - 1) / 2147483646;
            }
            choice(array) {
                return array[Math.floor(this.next() * array.length)];
            }
            int(min, max) {
                return Math.floor(this.next() * (max - min + 1)) + min;
            }
        }

        function createSeed(x, y) {
            let hash = x;
            hash = ((hash << 5) - hash) + y;
            return Math.abs(hash) || 1;
        }

        // === –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–∞ –ø–æ–¥–∑–µ–º–µ–ª—å—è ===
        function selectDungeonType(rand) {
            let r = rand.next() * TOTAL_WEIGHT;
            for (const type of DUNGEON_TYPES) {
                if (r < type.weight) return type;
                r -= type.weight;
            }
            return DUNGEON_TYPES[0];
        }

        // === –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã 15x15 ===
        function generateMap(rand, type) {
            const size = 15;
            const cells = [];
            for (let i = 0; i < size * size; i++) {
                if (rand.next() < 0.35) {
                    cells.push(type.emoji);
                } else {
                    cells.push(type.floor);
                }
            }
            // –¶–µ–Ω—Ç—Ä ‚Äî –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥
            cells[Math.floor(size * size / 2)] = 'üö™';
            return cells;
        }

        // === –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã ===
        function renderMap(cells) {
            const mapEl = document.getElementById('map');
            mapEl.innerHTML = '';
            cells.forEach(cell => {
                const div = document.createElement('div');
                div.className = 'cell';
                div.textContent = cell;
                mapEl.appendChild(div);
            });
        }

        // === –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è ===
        function generateNameAndDesc(rand, typeKey) {
            const themeKeys = Object.keys(NAME_COMPONENTS.themes);
            const theme = NAME_COMPONENTS.themes[rand.choice(themeKeys)];

            let name = rand.choice(theme.prefixes);
            if (rand.next() > 0.5) name += rand.choice(theme.roots);
            if (rand.next() > 0.5) name += rand.choice(NAME_COMPONENTS.extras);
            name += rand.choice(theme.suffixes);
            name = name.charAt(0).toUpperCase() + name.slice(1);

            const locType = rand.choice(NAME_COMPONENTS.locationTypes[typeKey] || ['–õ–æ–∫–∞—Ü–∏—è']);
            const desc = `${rand.choice(['–∑–∞–±—ã—Ç–∞—è', '–ø—Ä–æ–∫–ª—è—Ç–∞—è', '–¥—Ä–µ–≤–Ω—è—è'])}, ${rand.choice(['–æ—Å–≤–µ—â—ë–Ω–Ω–∞—è —Ç—É—Å–∫–ª—ã–º —Å–≤–µ—Ç–æ–º', '–ø–æ–ª–Ω–∞—è —ç—Ö–∞', '–æ–∫—É—Ç–∞–Ω–Ω–∞—è —Ç—É–º–∞–Ω–æ–º'])}`;

            return { name: `${locType} ${name}`, desc };
        }

        // === –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ===
        function generateLocation() {
            const x = parseInt(document.getElementById('coordX').value) || 0;
            const y = parseInt(document.getElementById('coordY').value) || 0;
            const seed = createSeed(x, y);
            const rand = new SeededRandom(seed);

            // –°–Ω–∞—á–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø–æ–¥–∑–µ–º–µ–ª—å—è
            const dungeonType = selectDungeonType(rand);
            const typeKey = dungeonType.name;

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
            const { name, desc } = generateNameAndDesc(rand, typeKey);

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            document.getElementById('locationName').textContent = name;
            document.getElementById('locationDescription').textContent = desc;
            const badge = document.getElementById('typeBadge');
            badge.textContent = typeKey;
            badge.className = 'type-badge ' + typeKey;

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞—Ä—Ç—É
            const map = generateMap(rand, dungeonType);
            renderMap(map);

            // Seed info
            document.getElementById('seedInfo').textContent = `–°–µ–º—è: ${seed} (X: ${x}, Y: ${y})`;
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = generateLocation;

        // Enter ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
        document.getElementById('coordX').addEventListener('keypress', e => { if (e.key === 'Enter') generateLocation(); });
        document.getElementById('coordY').addEventListener('keypress', e => { if (e.key === 'Enter') generateLocation(); });
    </script>
</body>
</html>
