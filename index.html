<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>–ü–æ–¥–∑–µ–º–µ–ª—å—è –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º</title>
  <style>
    body {
      margin: 0;
      padding: 16px;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #1a1a2e;
      color: #fff;
      text-align: center;
      overflow: hidden;
    }

    h1 {
      font-size: 1.4em;
      margin-bottom: 12px;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    input {
      width: 80px;
      padding: 6px;
      font-size: 1em;
      border: 1px solid #444;
      border-radius: 4px;
      background: #2d2d44;
      color: white;
      text-align: center;
    }

    button {
      padding: 6px 12px;
      font-size: 1em;
      background: #4a4a8a;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background: #5a5a9a;
    }

    .info {
      margin: 8px 0;
      font-size: 0.95em;
      color: #aaa;
    }

    .map {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
      width: 90vw;
      max-width: 350px;
      margin: 0 auto;
      aspect-ratio: 1 / 1;
    }

    .cell {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8em;
      background: #0f0f1a;
      border-radius: 4px;
    }

    .type-badge {
      margin-top: 8px;
      font-weight: bold;
      padding: 4px 10px;
      border-radius: 12px;
      display: inline-block;
    }

    .boss { background: #ff3333; }
    .icy { background: #7fdbff; color: #000; }
    .cave { background: #8b4513; }
    .dungeon { background: #555; }
    .rogue { background: #8a2be2; }
    .cellular { background: #32cd32; }
    .arena { background: #ff8c00; }
  </style>
</head>
<body>

  <h1>üó∫Ô∏è –ü–æ–¥–∑–µ–º–µ–ª—å–µ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º</h1>

  <div class="controls">
    <label>X: <input type="number" id="xInput" value="0" min="-999" max="999"></label>
    <label>Y: <input type="number" id="yInput" value="0" min="-999" max="999"></label>
    <button onclick="regenerate()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
  </div>

  <div class="info">Seed: <span id="seedDisplay">0</span></div>
  <div class="type-badge" id="typeBadge">‚Äî</div>

  <div class="map" id="map"></div>

  <script>
    // === –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª ===
    function seededRandom(seed) {
      let state = Math.abs(seed) || 1;
      return function () {
        state = (state * 1664525 + 1013904223) % 4294967296;
        return state / 4294967296;
      };
    }

    // === –¢–∏–ø—ã –ø–æ–¥–∑–µ–º–µ–ª–∏–π –∏ –∏—Ö —ç–º–æ–¥–∑–∏ ===
    const DUNGEON_TYPES = [
      { name: 'dungeon', weight: 14, emoji: 'üß±', floor: '‚¨ú' },
      { name: 'cave', weight: 14, emoji: 'üï≥Ô∏è', floor: 'üü§' },
      { name: 'icy', weight: 14, emoji: '‚ùÑÔ∏è', floor: 'üßä' },
      { name: 'rogue', weight: 14, emoji: 'üó°Ô∏è', floor: '‚¨õ' },
      { name: 'cellular', weight: 14, emoji: 'üß´', floor: 'üü£' },
      { name: 'arena', weight: 14, emoji: 'üé™', floor: 'üü•' },
      { name: 'boss', weight: 2, emoji: 'üëë', floor: 'üî•' } // —Ä–µ–¥–∫–∏–π!
    ];

    // –°—É–º–º–∞ –≤–µ—Å–æ–≤ = 100 ‚Üí boss = 2%
    const TOTAL_WEIGHT = DUNGEON_TYPES.reduce((sum, t) => sum + t.weight, 0);

    function selectDungeonType(rand) {
      let r = rand() * TOTAL_WEIGHT;
      for (const type of DUNGEON_TYPES) {
        if (r < type.weight) return type;
        r -= type.weight;
      }
      return DUNGEON_TYPES[0]; // fallback
    }

    // === –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã 7x7 ===
    function generateMap(rand, type) {
      const size = 7;
      const cells = [];
      for (let i = 0; i < size * size; i++) {
        // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞: ~30% ‚Äî —Å—Ç–µ–Ω—ã/–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        if (rand() < 0.3) {
          cells.push(type.emoji);
        } else {
          cells.push(type.floor);
        }
      }
      // –¶–µ–Ω—Ç—Ä ‚Äî –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥–∏–º
      cells[Math.floor(size * size / 2)] = 'üö™';
      return cells;
    }

    // === –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã ===
    function renderMap(cells) {
      const mapEl = document.getElementById('map');
      mapEl.innerHTML = '';
      cells.forEach(cell => {
        const div = document.createElement('div');
        div.className = 'cell';
        div.textContent = cell;
        mapEl.appendChild(div);
      });
    }

    // === –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ===
    function regenerate() {
      const x = parseInt(document.getElementById('xInput').value) || 0;
      const y = parseInt(document.getElementById('yInput').value) || 0;

      const seed = x * 10000 + y;
      document.getElementById('seedDisplay').textContent = seed;

      const rand = seededRandom(seed);
      const type = selectDungeonType(rand);

      document.getElementById('typeBadge').textContent = type.name;
      document.getElementById('typeBadge').className = 'type-badge ' + type.name;

      const map = generateMap(rand, type);
      renderMap(map);
    }

    // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.onload = regenerate;
  </script>

</body>
</html>
